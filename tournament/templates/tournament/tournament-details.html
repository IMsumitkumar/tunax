{% extends "base.html" %}
{% block title %} {{tournament.tournament_name}} {% endblock %}
{% load static %}
{% block content %}
{% load humanize %}
{% load social_share %}
{% load event_status %}
{% load custom_tags %}

{% block custom_style %}
    <style>
        .apexcharts-canvas {
            margin: 0 auto;
        }

        .apexcharts-title-text {
            fill: #e0e6ed;
        }
        .apexcharts-yaxis-label {
            fill: #e0e6ed;
        }
        .apexcharts-xaxis-label {
            fill: #e0e6ed;
        }
        .apexcharts-legend-text {
            color: #e0e6ed!important;
        }
        .apexcharts-radialbar-track.apexcharts-track .apexcharts-radialbar-area {
            stroke: #191e3a;
        }
        .apexcharts-pie-label, .apexcharts-datalabel, .apexcharts-datalabel-label, .apexcharts-datalabel-value {
            fill: #bfc9d4;
        }
    </style> 
{% endblock %}

<div class="layout-px-spacing">
    <div class="row layout-top-spacing">
        <div class="col-xl-9 col-lg-12 col-md-12 col-sm-12 col-12 layout-spacing">
            <div style="background-image: radial-gradient(circle at top left, rgb(36, 9, 119) 0%, rgb(36, 9, 119) 48%,rgb(72, 7, 149) 48%, rgb(72, 7, 149) 53%,rgb(109, 5, 178) 53%, rgb(109, 5, 178) 56%,rgb(145, 2, 208) 56%, rgb(145, 2, 208) 69%,rgb(181, 0, 237) 69%, rgb(181, 0, 237) 100%);" class="widget widget-chart-one">
                
                <div class="row layout-top-spacing">
                    <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                        <img style="border-radius: 0.50rem !important;" class="d-block w-100 rounded" src="{{ tournament.banner.url }}" alt="Top Banner" width="200" height="200">
                    </div>
                    <div class="col-xl-8 col-lg-8 col-md-8 col-sm-8 col-12">
                        <div class="row">
                            <div class="col">
                                <h2 style="color: azure;"><b>{{tournament.tournament_name}}</b></h2>
                            </div>

                            <div class="tags-selector btn-group">
                                <a class="nav-link dropdown-toggle d-icon label-group" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="true">
                                    <div class="tags">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="#000000" class="bi bi-share-fill" viewBox="0 0 16 16">
                                            <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                                        </svg>
                                    </div>
                                </a>
                                

                                <div class="dropdown-menu dropdown-menu-right d-icon-menu">
                                    <div class="row">
                                        <div class="col">{% post_to_whatsapp object_or_url %}</div>
                                        <div class="col">{% post_to_facebook object_or_url %}</div>
                                        <div class="col">{% post_to_telegram object_or_url %}</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {% if tournament.start_at|event_upcoming %}
                            <span class="badge outline-badge-success"> <b>UPCOMING</b> </span>
                        {% elif tournament.end_at|event_ended %}
                            <span class="badge badge-dark"> <b>ENDED</b> </span>
                        {% elif tournament.start_at|event_live:tournament.end_at %}
                            <span class="badge outline-badge-danger"> <b>LIVE</b> </span>
                        {% endif %}

                        <p></p>

                        {% if tournament.start_at|event_upcoming %}
                            <p><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg> <b> Starts in {{tournament.start_at|naturalday}}</b></p>
                        {% elif tournament.end_at|event_ended %}
                            <p><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg> <b> Ended at {{tournament.start_at|naturalday}}</b></p>
                        {% elif tournament.start_at|event_live:tournament.end_at %}
                            <p><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg> <b> Event is LIVE</b></p>
                        {% endif %}

                        <p>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cash-coin" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"/>
                                <path d="M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1h-.003zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195l.054.012z"/>
                                <path d="M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083c.058-.344.145-.678.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1H1z"/>
                                <path d="M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 5.982 5.982 0 0 1 3.13-1.567z"/>
                            </svg><b>  20 BTP</b>
                        </p>
                        <div class="row">
                            <div class="col">
                                <p><b>Organized by {{tournament.admin|upper}}
                                    <!-- <img alt="avatar" src="{% static 'assets/img/home1.jpg' %}" class="rounded-circle" width="20" height="20" /> -->
                                </p></b>
                            </div>
                            <div class="col mx-1">
                                <p style="float: right; color: black;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg><b> {{confirmed_teams|length}} / {{tournament.slots}} Teams</b></p>
                            </div>
                        </div>
                        <div class="progress br-30 progress-sm">
                            <div class="progress-bar bg-success" role="progressbar" style="width: 100%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        
                    </div>
                    
                </div>

                <div class="row">
                    
                    <div class="col">
                        {% if tournament.start_at|event_upcoming %}
                            <div class="row mx-2 mt-3">
                                <p><b>Registration Open</b></p>
                            </div>
                        {% elif tournament.end_at|event_ended %}
                            <div class="row mx-2 mt-3">
                                <p><b>Registration Closed</b></p>
                            </div>
                        {% elif tournament.start_at|event_live:tournament.end_at %}
                            <div class="row mx-2 mt-3">
                                <p><b>Registration Closed</b></p>
                            </div>
                        {% endif %}
                        <div class="row mx-2">
                            <span class="badge badge-dark"><b><span style="color: lightgreen;">{{confirmed_teams|length}}</span> Teams Confirmed</b></span> 
                        </div>
                    </div>
                
                    <div class="col mt-3 mx-1">

                        {% if request.user|have_tournament_owner_permission:tournament.id %}
                            <a href="{% url 'manage-tournament-result' tournament.id %}" style="float: right; border-radius: 20px;" type="button"  class="btn btn-light mb-2">
                                <b>Submit Results</b>
                            </a>
                        {% else %}


                            {% if tournament.start_at|event_upcoming %}
                                {% if tournament.slots|is_slots_left:confirmed_teams %}
                                            
                                        {% if request.user.is_authenticated %}
                                            {% include "components/join-tourna-button.html" %}
                                        {% else %}
                                        <butto type="button" style="float: right; border-radius: 20px;" class="login-button btn btn-secondary" data-toggle="modal" data-target="#loginModal">
                                            Login / signup
                                        </button> 
                                        <!-- <a href="{% url 'register' %}" style="float: right; border-radius: 20px;" type="button" class="login-button btn btn-secondary mb-2">
                                            Create Account
                                        </a> -->
                                        {% endif %}
                                        
                                {% else %}
                                    <a style="float: right; border-radius: 20px;" type="button"  class="btn btn-dark mb-2" disabled>
                                        <b>Slots Filled</b>
                                    </a>
                                {% endif %}
                                
                            {% elif tournament.end_at|event_ended %}
                                <div class="col">
                                    <a style="float: right; border-radius: 20px;" type="button"  class="btn btn-dark mb-2" disabled>
                                        <b>Registeration Closed</b>
                                    </a>
                                </div>
                            {% elif tournament.start_at|event_live:tournament.end_at %}
                                <div class="col">
                                    <a style="float: right; border-radius: 20px;" type="button"  class="btn btn-dark mb-2" disabled>
                                        <b>Registeration Closed</b>
                                    </a>
                                </div>
                            {% endif %}


                        {% endif %}  
                        
                    </div>

                </div>
            </div>

            <div class="row mt-3">
                <div class="col-lg-12 col-12 layout-spacing">
                    <div class="statbox widget box box-shadow">

                        <div style="padding: 0px !important;" class="widget-content widget-content-area pill-justify-centered">
                            
                            <ul class="nav nav-pills mb-3 mt-3 justify-content-center" id="justify-center-pills-tab" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="justify-center-pills-overview-tab" data-toggle="pill" href="#justify-center-pills-overview" role="tab" aria-controls="justify-center-pills-overview" aria-selected="true"><b>Overview</b></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="justify-center-pills-rules-tab" data-toggle="pill" href="#justify-center-pills-rules" role="tab" aria-controls="justify-center-pills-rules" aria-selected="false"><b>Rules</b></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="justify-center-pills-prizes-tab" data-toggle="pill" href="#justify-center-pills-prizes" role="tab" aria-controls="justify-center-pills-prizes" aria-selected="false"><b>Prize</b></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="justify-center-pills-participants-tab" data-toggle="pill" href="#justify-center-pills-participants" role="tab" aria-controls="justify-center-pills-participants" aria-selected="false"><b>participants</b></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="justify-center-pills-winner-tab" data-toggle="pill" href="#justify-center-pills-winner" role="tab" aria-controls="justify-center-pills-winner" aria-selected="false"><b>Result</b></a>
                                </li>
                            </ul>

                            <div class="tab-content" id="justify-center-pills-tabContent">
                                <div class="tab-pane fade show active" id="justify-center-pills-overview" role="tabpanel" aria-labelledby="justify-center-pills-overview-tab">
                                    
                                    <div style="border-radius: 30px;" class="table-responsive">
                                        <table class="table table-bordered mb-4">
                                            
                                            <tbody>
                                                <tr>
                                                    <td><b>Game</b></td>
                                                    <td><b>Battlegrounds india mobile</b></td>
                                                </tr>
                                                <tr>
                                                    <td><b>Slot</b></td>
                                                    <td><b>{{tournament.slots}}</b></td>
                                                </tr>
                                                <tr>
                                                    <td><b>Type</b></td>
                                                    <td><span class="badge badge-secondary mx-1"> <b>{{tournament.game_type}}</b> </span>
                                                    <span class="badge badge-secondary mx-1"> <b>{{tournament.team_type}}</b> </span>
                                                </tr>
                                                <tr>
                                                    <td><b>Start Date</b></td>
                                                    <td><b>{{tournament.start_at }}</b></td>
                                                </tr>
                                                <tr>
                                                    <td><b>End Date</b></td>
                                                    <td><b>{{tournament.end_at}}</b></td>
                                                </tr>
                                                {% if tournament.youtube_url|have_youtube %}
                                                    <tr>
                                                        <td><b>Youtube Link (click me) <svg style="margin-bottom: -5px;" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="red" class="bi bi-youtube" viewBox="0 0 16 16">
                                                            <path d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.007 2.007 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.007 2.007 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31.4 31.4 0 0 1 0 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.007 2.007 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A99.788 99.788 0 0 1 7.858 2h.193zM6.4 5.209v4.818l4.157-2.408L6.4 5.209z"/>
                                                          </svg></b></td>
                                                        <td><b style="color: blue;">{{tournament.youtube_url|urlize}}</b></td>
                                                    </tr>
                                                {% endif %}
                                            </tbody>
                                        </table>
                                    </div>
                                       
                                </div>
                                <div class="tab-pane fade" id="justify-center-pills-rules" role="tabpanel" aria-labelledby="justify-center-pills-rules-tab">

                                    <div class="row">
                                        <div class="col d-flex justify-content-start">
                                            <div class="widget-content widget-content-area">
                                                <div style="font-size: 20px; color: azure;" id="editor-container">
                                                    {{tournament.rules|linebreaks}}
                                                </div>
                                            </div>
                                        </div>
                                        
                                        {% if tournament.discord_server_id|have_discord %}
                                        <div class="col d-flex justify-content-end">
                                            <iframe src="https://discord.com/widget?id={{tournament.discord_server_id}}&theme=dark" width="300" height="400" allowtransparency="true" frameborder="0" sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"></iframe>
                                        </div>
                                        {% endif %}
                                    </div>
                                    
                                    


                                </div>
                                <div class="row tab-pane fade" id="justify-center-pills-prizes" role="tabpanel" aria-labelledby="justify-center-pills-prizes-tab">
                                    <p class="dropcap  dc-outline-primary">
                                        <div class="widget-content widget-content-area">
                                            <div class="row">
                                                <div class="col-xl-4 col-lg-6 col-md-6 col-sm-6 col-12 layout-spacing">
                                                    <div class="card component-card_1"> 
                                                        <!-- style="background-image:url('https://i.imgur.com/uSziVDA.png');background-blend-mode: screen;"   -->
                                                        <div class="card-body">
                                                            <div class="icon-svg">
                                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-award-fill" viewBox="0 0 16 16">
                                                                    <path d="m8 0 1.669.864 1.858.282.842 1.68 1.337 1.32L13.4 6l.306 1.854-1.337 1.32-.842 1.68-1.858.282L8 12l-1.669-.864-1.858-.282-.842-1.68-1.337-1.32L2.6 6l-.306-1.854 1.337-1.32.842-1.68L6.331.864 8 0z"/>
                                                                    <path d="M4 11.794V16l4-1 4 1v-4.206l-2.018.306L8 13.126 6.018 12.1 4 11.794z"/>
                                                                  </svg>                                                            
                                                            </div>
                                                            <h5 class="card-title">1st winner | {{winners.0.teamname}}</h5>
                                                            <h6 class="card-text">Prize Pool + E-Certificate</h6>
                                                        </div>
                                                        
                                                    </div>
                                                </div>
                                                <div class="col-xl-4 col-lg-6 col-md-6 col-sm-6 col-12 layout-spacing">
                                                    <div class="card component-card_1">
                                                        <div class="card-body">
                                                            <div class="icon-svg">
                                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-award-fill" viewBox="0 0 16 16">
                                                                    <path d="m8 0 1.669.864 1.858.282.842 1.68 1.337 1.32L13.4 6l.306 1.854-1.337 1.32-.842 1.68-1.858.282L8 12l-1.669-.864-1.858-.282-.842-1.68-1.337-1.32L2.6 6l-.306-1.854 1.337-1.32.842-1.68L6.331.864 8 0z"/>
                                                                    <path d="M4 11.794V16l4-1 4 1v-4.206l-2.018.306L8 13.126 6.018 12.1 4 11.794z"/>
                                                                  </svg>                                                            
                                                                </div>
                                                                <h5 class="card-title">2nd winner | {{winners.1.teamname}}</h5>
                                                                <h6 class="card-text">E-Certificate</h6>
                                                        </div>
                                                        
                                                    </div>
                                                </div>
                                                <div class="col-xl-4 col-lg-6 col-md-6 col-sm-6 col-12 layout-spacing">
                                                    <div class="card component-card_1">
                                                        <div class="card-body">
                                                            <div class="icon-svg">
                                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-award-fill" viewBox="0 0 16 16">
                                                                    <path d="m8 0 1.669.864 1.858.282.842 1.68 1.337 1.32L13.4 6l.306 1.854-1.337 1.32-.842 1.68-1.858.282L8 12l-1.669-.864-1.858-.282-.842-1.68-1.337-1.32L2.6 6l-.306-1.854 1.337-1.32.842-1.68L6.331.864 8 0z"/>
                                                                    <path d="M4 11.794V16l4-1 4 1v-4.206l-2.018.306L8 13.126 6.018 12.1 4 11.794z"/>
                                                                  </svg>                                                            
                                                                </div>
                                                            <h5 class="card-title">3rd winner | {{winners.2.teamname}}</h5>
                                                            <h6 class="card-text">E-Certificate</h6>
                                                        </div>
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                            
                                        </div>
                                    </p>
                                </div>
                                <div class="tab-pane fade" id="justify-center-pills-participants" role="tabpanel" aria-labelledby="justify-center-pills-participants-tab">
                                    <div class="container">
                                        <div class="row">
                                            {% for team in confirmed_teams %}
                                                <div class="col-xl-4 col-lg-6 col-md-6 col-sm-6 col-12 layout-spacing">
                                                    <div class="card component-card_1">
                                                        <div class="row">
                                                            <div class="col-xl-2 col-lg-2 col-md-2 col-sm-2 col-2">    
                                                                <div class="avatar avatar-lg">
                                                                    <img alt="avatar" src="{{team.team_pic.url}}" class="rounded" width="40" height="40" />
                                                                </div>
                                                            </div>
                                                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-7 mt-2">
                                                                <p class="body-title"><b>  {{ team.team_name }}</p></b>
                                                            </div>
                                                            <div class="col-xl-2 col-lg-2 col-md-2 col-sm-2 col-2 mt-2 mx-2">
                                                                <div class="btn-group">
                                                                    <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="true">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>                                                                        <!-- </div> -->
                                                                    </a>
                                                                    <div class="dropdown-menu dropdown-menu-right">
                                                                        {% for member in team.get_team_member_list %}
                                                                        <a class="label-group-item dropdown-item position-relative"><b> {{member.team_member}}</b></a>
                                                                        {% endfor %}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            
                                                        </div>                                                    
                                                    </div>
                                                </div>
                                            {% endfor %}
                                        </div>
                                    </div>   
                                </div>
                                <div class="tab-pane fade" id="justify-center-pills-winner" role="tabpanel" aria-labelledby="justify-center-pills-winner-tab">
                                    <div class="row">
                                        <div class="col-xl-5 col-lg-5 col-md-6 col-sm-12 col-12 layout-spacing">
                                            <div class="table-responsive">
                                                <table id="point-table" style="border-radius: 15px;" class="table table-bordered">
                                                    <thead>
                                                        <tr>
                                                            <th class="text-center">Team Name</th>
                                                            <th class="text-center">Kill Points</th>
                                                            <th class="text-center">place points</th>
                                                            <th class="text-center">Total pts</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="resulttablebody">
                                                        {% for t in teams %}
                                                        <tr>
                                                            <td class="text-center">{{t.teamname}}</td>
                                                            <td class="text-center">{{t.killspts}}</td>
                                                            <td class="text-center">{{t.placepts}}</td>
                                                            <td class="text-center">{{t.total_points}}</td>
                                                        </tr>
                                                        {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                            {% if request.user == tournament.admin %}
                                                <!-- <div class="d-flex justify-content-center">
                                                    <button id="dwnld-ptable" class="invite-button btn btn-secondary">Download</button>
                                                </div> -->
                                                {% include 'components/points-table.html' %}
                                            {% endif %}
                                        </div>  
                                        <div class="col-xl-7 col-lg-7 col-md-6 col-sm-12 col-12 mt-1">
                                            <div id="s-bar" class=""></div>
                                        </div>
                                    </div>
                                    <div class="row"> 
                                        <div class="col">
                                            <div id="s-line-area" class=""></div>
                                        </div>
                                    </div>
                                    <div class="row"> 
                                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12 layout-spacing">
                                            <div id="s-col" class=""></div>
                                        </div>
                                        
                                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12 layout-spacing">
                                            <div id="total-kills" class=""></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <!-- <div class="container">
                            <div class="row">
                                <div class="col-xl-2 col-lg-3 col-md-3 col-sm-12 col-12 layout-spacing mt-2 mx-2">
                                    <span><b>Sponsered by</b></span>
                                </div>
                                <div class="col-xl-10 col-lg-11 col-md-9 col-sm-12 col-12 layout-spacing">
                                    <div class="avatar">
                                        <img alt="avatar" src="{% static 'assets/img/90x90.jpg' %}" class="rounded-circle" width="40" height="40" />
                                        <img alt="avatar" src="{% static 'assets/img/90x90.jpg' %}" class="rounded-circle" width="40" height="40" />
                                        <img alt="avatar" src="{% static 'assets/img/90x90.jpg' %}" class="rounded-circle" width="40" height="40" />
                                    </div>
                                </div>
                            </div>
                        </div> -->
                    </div>
                </div>

            </div>
        </div>

        {% if request.user|have_tournament_owner_permission:tournament.id %}
            {% include 'components/team_confirm.html' %}
        {% else %}
            {% include 'components/top-teams.html' %}
        {% endif %}

        
    </div>
</div>

    {% block custom_js %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js" integrity="sha512-s/XK4vYVXTGeUSv4bRPOuxSDmDlTedEpMEcAQk0t/FMd9V6ft8iXdwSBxV0eD60c6w/tjotSlKu9J2AAW1ckTA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="{% static 'plugins/apex/apexcharts.min.js' %}"></script>

    <script>
        {% if request.user == tournament.admin %}
            $("#dwnld-ptable").click(function(){
                console.log("O");
                html2canvas($("#point-table"),
                {   
                    scale: 2,
                    onrendered:function(canvas){
                        var a = document.createElement('a');
                        a.href = canvas.toDataURL("image/png");
                        a.download = "match-stats.png"
                        a.click(); 
                    }
                });
            });
        {% endif %}
        
    </script>
    
        <script>
        Apex.grid = {
            borderColor: '#191e3a'
        }
        Apex.track = {
            background: '#0e1726',
        }
        Apex.tooltip = {
            theme: 'dark'
        }
        // Simple Line

        var sline = {
        chart: {
            height: 350,
            type: 'line',
            zoom: {
            enabled: false
            },
            toolbar: {
            show: false,
            }
        },
        dataLabels: {
            enabled: false
        },
        stroke: {
            curve: 'straight'
        },
        series: [{
            name: "Total Points",
            data: [{% for team in teams %}'{{team.total_points}}',{% endfor %}].slice(0, 5)
        }],
        title: {
            text: 'Based on total points',
            align: 'left'
        },
        grid: {
            row: {
            colors: ['#3b3f5c', 'transparent'], // takes an array which will be repeated on columns
            opacity: 0.5
            },
        },
        xaxis: {
            categories: [{% for team in teams %}'{{team.teamname}}',{% endfor %}],
        }
        }

        var chart = new ApexCharts(
        document.querySelector("#total-kills"),
        sline
        );

        chart.render();


        var sCol = {
            chart: {
                height: 350,
                type: 'bar',
                toolbar: {
                show: false,
                }
            },
            plotOptions: {
                bar: {
                    horizontal: false,
                    columnWidth: '55%',
                    endingShape: 'rounded'  
                },
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                show: true,
                width: 2,
                colors: ['transparent']
            },
            series: [{
                name: 'Kills',
                data: [{% for team in teams %}'{{team.killspts}}',{% endfor %}].slice(0, 5)
            }, {
                name: 'Place Points',
                data: [{% for team in teams %}'{{team.placepts}}',{% endfor %}].slice(0, 5)
            }],
            xaxis: {
                categories: [{% for team in teams %}'{{team.teamname}}',{% endfor %}].slice(0, 5),
            },
            yaxis: {
                title: {
                    text: ''
                }
            },
            fill: {
                opacity: 1
            },
            tooltip: {
                y: {
                    formatter: function (val) {
                        return val
                    }
                }
            }
        }

        var chart = new ApexCharts(
            document.querySelector("#s-col"),
            sCol
        );

        chart.render();



        var sBar = {
            chart: {
                height: 450,
                type: 'bar',
                toolbar: {
                show: false,
                }
            },
            plotOptions: {
                bar: {
                    horizontal: true,
                }
            },
            dataLabels: {
                enabled: false
            },
            series: [{
                name: 'total points',
                data: [{% for team in teams %}'{{team.total_points}}',{% endfor %}].slice(0, 10)
            }],
            xaxis: {
                categories: [{% for team in teams %}'{{team.teamname}}',{% endfor %}].slice(0, 10),
            }
        }

        var chart = new ApexCharts(
            document.querySelector("#s-bar"),
            sBar
        );

        chart.render();


        var sLineArea = {
            chart: {
                height: 350,
                type: 'area',
                toolbar: {
                show: false,
                }
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                curve: 'smooth'
            },
            series: [{
                name: 'place points',
                data: [{% for team in teams %}'{{team.placepts}}',{% endfor %}].slice(0, 15)
            }, {
                name: 'kill points',
                data: [{% for team in teams %}'{{team.killspts}}',{% endfor %}].slice(0, 15)
            }, {
                name: 'total points',
                data: [{% for team in teams %}'{{team.total_points}}',{% endfor %}].slice(0, 15)
            }],

            xaxis: {
                type: 'team',
                categories: [{% for team in teams %}'{{team.teamname}}',{% endfor %}].slice(0, 15),                
            },
            tooltip: {
                x: {
                    format: 'dd/MM/yy HH:mm'
                },
            }
        }

        var chart = new ApexCharts(
            document.querySelector("#s-line-area"),
            sLineArea
        );

        chart.render();

        </script>

    {% endblock %}

{% endblock %}